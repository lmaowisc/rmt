<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Analysis of multistate hierarchical outcomes by the restricted mean time in favor of treatment • rmt</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analysis of multistate hierarchical outcomes by the restricted mean time in favor of treatment">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rmt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/multistate.html">Analysis of multistate hierarchical outcomes by the restricted mean time in favor of treatment</a></li>
    <li><a class="dropdown-item" href="../articles/recurrent_event.html">Analysis of composite endpoints of recurrent event and death by the restricted mean time in favor of treatment</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Analysis of multistate hierarchical outcomes by the restricted mean time in favor of treatment</h1>
                        <h4 data-toc-skip class="author">Lu Mao</h4>
            
      

      <div class="d-none name"><code>multistate.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">INTRODUCTION<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates the use of the R-package <code>rmt</code>
for the restricted-mean-time-in-favor-of-treatment approach to the
analysis of multiple prioritized outcomes.</p>
<div class="section level3">
<h3 id="data-type">Data type<a class="anchor" aria-label="anchor" href="#data-type"></a>
</h3>
<p>To recap the methodology, we formulate patient experience with
multiple events as a multistate process
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Y(t)</annotation></semantics></math>
taking values in the ordered set
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>K</mi><mo>,</mo><mi>K</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{0,1,\ldots, K, K+1\}</annotation></semantics></math>,
with a larger integer representing a more series condition. For example,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">Y(t)=0</annotation></semantics></math>
if a cancer patient is in a state of remission,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">Y(t)=1</annotation></semantics></math>
if the cancer has relapsed,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">Y(t)=2</annotation></semantics></math>
if it has metastasized, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">Y(t)=3</annotation></semantics></math>
if the patient has died. The methodology in <code>rmt</code> is
sufficiently general to be applicable to a wide range of settings, as
long as the following assumptions are met:</p>
<ol style="list-style-type: decimal">
<li>The outcome process is <strong>progressive</strong> (can transition
only from a less serious to a more serious state), i.e.,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>≤</mo><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>s</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Y(t)\leq Y(s)</annotation></semantics></math>
for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>≤</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">t\leq s</annotation></semantics></math>;</li>
<li>Death is the only absorbing state, i.e., no competing risks to death
(hence “cure models” are not allowed).</li>
</ol>
</div>
<div class="section level3">
<h3 id="effect-size-estimand">Effect size estimand<a class="anchor" aria-label="anchor" href="#effect-size-estimand"></a>
</h3>
<p>Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow></msup><annotation encoding="application/x-tex">Y^{(a)}</annotation></semantics></math>
denote the outcome process from group
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>a</mi><annotation encoding="application/x-tex">a</annotation></semantics></math>
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a=1</annotation></semantics></math>
for the treatment and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a=0</annotation></semantics></math>
for the control). The estimand of interest is constructed under a
generalized pairwise comparison framework (Buyse, 2010). With
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msup><mo>⊥</mo><msup><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo stretchy="true" form="postfix">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">Y^{(1)}\perp Y^{(0)}</annotation></semantics></math>,
let <span class="math display">$$\mu(\tau)=E\int_0^\tau
I\{Y^{(1)}(t)&lt; Y^{(0)}(t)\}{\rm d}t -
E\int_0^\tau I\{Y^{(1)}(t)&gt; Y^{(0)}(t)\}{\rm d}t,$$</span> for some
pre-specified follow-up time
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>.
We call
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>τ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu(\tau)</annotation></semantics></math>
the <strong>restricted mean time (RMT) in favor of treatment</strong>
and interpret it as the <em>average time gained by the treatment in a
more favorable condition</em>. It generalizes the familiar restricted
mean survival time to account for the intermediate stages in disease
progression. In fact, it can be shown that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>τ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu(\tau)</annotation></semantics></math>
reduces to the net restricted mean survival time (Royston &amp; Parmar,
2011) under the two-state life-death model. For details of the
methodology, refer to Mao (2021).</p>
<p>The overall effect size can be decomposed into stage-wise components:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>τ</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>K</mi><mo>+</mo><mn>1</mn></mrow></munderover><msub><mi>μ</mi><mi>k</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>τ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu(\tau)=\sum_{k=1}^{K+1}\mu_k(\tau)</annotation></semantics></math>
with <span class="math display">$$\begin{equation}\label{eq:comp}\tag{*}
\mu_k(\tau)=E\int_0^\tau I\{Y^{(1)}(t)&lt;k, Y^{(0)}(t)=k\}{\rm d}t -
E\int_0^\tau I\{Y^{(0)}(t)&lt;k, Y^{(1)}(t)=k\}{\rm d}t.
\end{equation}$$</span> The component
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>k</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>τ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu_k(\tau)</annotation></semantics></math>
can be interpreted as the average ``pre-state
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>’’
time gained by the treatment among those who have not transitioned to
state
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(k+1)</annotation></semantics></math>
or higher. It is clear that the last component
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mrow><mi>K</mi><mo>+</mo><mn>1</mn></mrow></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu_{K+1}(t)</annotation></semantics></math>
always stands for the usual net restricted mean survival time.</p>
</div>
</div>
<div class="section level2">
<h2 id="basic-syntax">BASIC SYNTAX<a class="anchor" aria-label="anchor" href="#basic-syntax"></a>
</h2>
<div class="section level3">
<h3 id="data-fitting-and-summarization">Data fitting and summarization<a class="anchor" aria-label="anchor" href="#data-fitting-and-summarization"></a>
</h3>
<p>The main data-fitting function is <code><a href="../reference/rmtfit.html">rmtfit()</a></code>. To use the
function, the input data must be organized in the “long” format.
Specifically, we need an <code>id</code> variable containing the unique
patient identifiers, a <code>time</code> variable containing the times
of the transitioning events, a <code>status</code> variable labeling the
event type (<code>status=k</code> if transitioning to state
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>
and <code>status=0</code> if censored; note that death is represented by
<code>status=K+1</code>), and, finally, a <em>binary</em>
<code>trt</code> variable containing the subject-level treatment arm
indicators. If <code>id</code>, <code>time</code>, <code>status</code>,
and <code>trt</code> are all variables in a data frame
<code>data</code>, we can then use the formula form of the function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span><span class="op">=</span><span class="fu"><a href="../reference/rmtfit.html">rmtfit</a></span><span class="op">(</span><span class="fu"><a href="../reference/ms.html">ms</a></span><span class="op">(</span><span class="va">id</span>,<span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">trt</span>,<span class="va">data</span><span class="op">)</span></span></code></pre></div>
<p>Otherwise, we can feed the vector-valued variables directly into the
function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span><span class="op">=</span><span class="fu"><a href="../reference/rmtfit.html">rmtfit</a></span><span class="op">(</span><span class="va">id</span>,<span class="va">time</span>,<span class="va">status</span>,<span class="va">trt</span>,type<span class="op">=</span><span class="st">"multistate"</span><span class="op">)</span></span></code></pre></div>
<p>The (default) <code>type</code> option specifies the input as
multistate data rather than recurrent event data
(<code>type=="recurrent"</code>).</p>
<p>The returned object <code>obj</code> contains basically all the
information about the overall and stage-wise RMTs. To extract relevant
information for a particular
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">\tau=</annotation></semantics></math><code>tau</code>,
use</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">obj</span>,<span class="va">tau</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot-of-mucdot">Plot of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mo>⋅</mo><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu(\cdot)</annotation></semantics></math><a class="anchor" aria-label="anchor" href="#plot-of-mucdot"></a>
</h3>
<p>To plot the estimated
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>τ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu(\tau)</annotation></semantics></math>
as a function of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>,
use</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">obj</span>,conf<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The option <code>conf=T</code> requests the 95% confidence limits to
be overlaid. The color and line type of the confidence limits can be
controlled by arguments <code>conf.col</code> and <code>conf.lty</code>,
respectively. Other graphical parameters can be specified and, if so,
will be passed to the underlying generic <code>plot</code> method.</p>
</div>
<div class="section level3">
<h3 id="bouquet-plot">Bouquet plot<a class="anchor" aria-label="anchor" href="#bouquet-plot"></a>
</h3>
<p>The dynamic profile of treatment effects as follow-up progresses is
captured by the bouquet plot, which puts
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>
on the vertical axis and plots the stage-wise restricted mean win/loss
times, i.e., the first and second terms on the right hand side of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mo>*</mo><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(*)</annotation></semantics></math>,
as functions of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>
on the two sides. The bouquet plot is useful because it visualizes the
component-wise contributions to the overall effect. To plot it, use</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bouquet.html">bouquet</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></code></pre></div>
<p>Other graphical parameters can be specified and, if so, will be
passed to the underlying generic <code>plot</code> method.</p>
</div>
</div>
<div class="section level2">
<h2 id="an-example-with-a-colon-cancer-trial">AN EXAMPLE WITH A COLON CANCER TRIAL<a class="anchor" aria-label="anchor" href="#an-example-with-a-colon-cancer-trial"></a>
</h2>
<div class="section level3">
<h3 id="data-description">Data description<a class="anchor" aria-label="anchor" href="#data-description"></a>
</h3>
<p>A landmark colon cancer trial on the efficacy of levamisole and
fluorouracil was reported by Moertel et al. (1990). The trial recruited
929 patients with stage C disease and randomly assigned them to
levamisole treatment alone, levamisole combined with fluorouracil, and
the control. We focus on the comparison between the combined treatment
and control groups, consisting of 304 and 314 patients, respectively.
The endpoints of interest are cancer relapse and death. The death rates
in the treatment and control groups are about 40% and 53%, relapse rates
about 39% and 56%, and median follow-up times about 5.7 and 5.1 years,
respectively.</p>
<p>The dataset <code>colon_lev</code> (a subset of the
<code>colon</code> dataset in the <code>survival</code> package) is
contained in the <code>rmt</code> package and can be loaded by</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sites.google.com/view/lmaowisc/" class="external-link">rmt</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">colon_lev</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id      time status      rx sex age</span></span>
<span><span class="co">#&gt; 1  1 2.6502396      1 Lev+5FU   1  43</span></span>
<span><span class="co">#&gt; 2  1 4.1642710      2 Lev+5FU   1  43</span></span>
<span><span class="co">#&gt; 3  2 8.4517454      0 Lev+5FU   1  63</span></span>
<span><span class="co">#&gt; 4  3 1.4839151      1 Control   0  71</span></span>
<span><span class="co">#&gt; 5  3 2.6365503      2 Control   0  71</span></span>
<span><span class="co">#&gt; 6  4 0.6707734      1 Lev+5FU   0  66</span></span></code></pre></div>
<p>The dataset is already in a format suitable for <code><a href="../reference/rmtfit.html">rmtfit()</a></code>
(<code>status</code>= 1 for relapse and = 2 for death).</p>
</div>
<div class="section level3">
<h3 id="estimation-and-inference">Estimation and inference<a class="anchor" aria-label="anchor" href="#estimation-and-inference"></a>
</h3>
<p>We first fit the data by</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span><span class="op">=</span><span class="fu"><a href="../reference/rmtfit.html">rmtfit</a></span><span class="op">(</span><span class="fu"><a href="../reference/ms.html">ms</a></span><span class="op">(</span><span class="va">id</span>,<span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">rx</span>,data<span class="op">=</span><span class="va">colon_lev</span><span class="op">)</span></span>
<span><span class="co">## print the event numbers by group</span></span>
<span><span class="va">obj</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; rmtfit.formula(formula = ms(id, time, status) ~ rx, data = colon_lev)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           N State 1 Death Med follow-up time</span></span>
<span><span class="co">#&gt; Control 315     177   168           5.081451</span></span>
<span><span class="co">#&gt; Lev+5FU 304     119   123           5.749487</span></span>
<span></span>
<span><span class="co"># summarize the inference results for tau=7.5 years</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">obj</span>,tau<span class="op">=</span><span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; rmtfit.formula(formula = ms(id, time, status) ~ rx, data = colon_lev)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Restricted mean winning time by tau = 7.5:</span></span>
<span><span class="co">#&gt;           State 1 Survival  Overall</span></span>
<span><span class="co">#&gt; Control 0.2659633 1.130967 1.396930</span></span>
<span><span class="co">#&gt; Lev+5FU 0.6120146 1.750924 2.362938</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Restricted mean time in favor of group "Lev+5FU" by time tau = 7.5:</span></span>
<span><span class="co">#&gt;          Estimate  Std.Err Z value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; State 1  0.346051 0.072066  4.8018 1.572e-06 ***</span></span>
<span><span class="co">#&gt; Survival 0.619957 0.213610  2.9023  0.003704 ** </span></span>
<span><span class="co">#&gt; Overall  0.966008 0.252585  3.8245  0.000131 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre></div>
<p>From the above output, we conclude that, at 7.5 years, the combined
treatment on average gains the patient 0.97 extra year in a more
favorable state compared to the control. This total effect size
comprises an additional 0.62 year of survival time and 0.35 year of
relapse-free time among the survivors. The matrix containing the
inferential results can be obtained from
<code>summary(obj,tau=7.5)$tab</code>.</p>
</div>
<div class="section level3">
<h3 id="graphical-analysis">Graphical analysis<a class="anchor" aria-label="anchor" href="#graphical-analysis"></a>
</h3>
<p>Use the following code to construct the bouquet plot and the plot for
the estimated
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mo>⋅</mo><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mu(\cdot)</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set-up plot parameters</span></span>
<span><span class="va">oldpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"mfrow"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Bouquet plot</span></span>
<span><span class="fu"><a href="../reference/bouquet.html">bouquet</a></span><span class="op">(</span><span class="va">obj</span>,main<span class="op">=</span><span class="st">"Bouquet plot"</span>,cex.group<span class="op">=</span><span class="fl">0.8</span>, xlab<span class="op">=</span><span class="st">"Restricted mean win/loss time (years)"</span>,</span>
<span>        ylab<span class="op">=</span><span class="st">"Follow-up time (years)"</span><span class="op">)</span> <span class="co">#cex.group: font size of group labels#</span></span>
<span><span class="co"># Plot of RMT in favor of treatment over time</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">obj</span>,conf<span class="op">=</span><span class="cn">TRUE</span>,col<span class="op">=</span><span class="st">'red'</span>,conf.col<span class="op">=</span><span class="st">'blue'</span>,conf.lty<span class="op">=</span><span class="fl">2</span>, xlab<span class="op">=</span><span class="st">"Follow-up time (years)"</span>,</span>
<span>        ylab<span class="op">=</span><span class="st">"RMT in favor of treatment (years)"</span>,main<span class="op">=</span><span class="st">"Overall"</span><span class="op">)</span></span></code></pre></div>
<p><img src="multistate_files/figure-html/unnamed-chunk-8-1.png" width="691.2" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">oldpar</span><span class="op">)</span></span></code></pre></div>
<p>From the left panel, both the restricted mean survival (dark gray)
and pre-relapse times (light gray) are clearly in favor of the
treatment, both increasingly so as follow-up continues. From the right
panel, judging from the lower 95% confidence limit, the treatment effect
becomes significant at the 0.05 level soon after randomization and stays
so till the end of the study. To plot the component-specific curves ,
run</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set-up plot parameters</span></span>
<span><span class="va">oldpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"mfrow"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot of component-wise RMT in favor of treatment over time</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">obj</span>,k<span class="op">=</span><span class="fl">2</span>,conf<span class="op">=</span><span class="cn">TRUE</span>,col<span class="op">=</span><span class="st">'red'</span>,conf.col<span class="op">=</span><span class="st">'blue'</span>,conf.lty<span class="op">=</span><span class="fl">2</span>, xlab<span class="op">=</span><span class="st">"Follow-up time (years)"</span>,</span>
<span>        ylab<span class="op">=</span><span class="st">"RMT in favor of treatment (years)"</span>,main<span class="op">=</span><span class="st">"Survival"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">obj</span>,k<span class="op">=</span><span class="fl">1</span>,conf<span class="op">=</span><span class="cn">TRUE</span>,col<span class="op">=</span><span class="st">'red'</span>,conf.col<span class="op">=</span><span class="st">'blue'</span>,conf.lty<span class="op">=</span><span class="fl">2</span>, xlab<span class="op">=</span><span class="st">"Follow-up time (years)"</span>,</span>
<span>        ylab<span class="op">=</span><span class="st">"RMT in favor of treatment (years)"</span>,main<span class="op">=</span><span class="st">"Pre-relapse"</span><span class="op">)</span></span></code></pre></div>
<p><img src="multistate_files/figure-html/unnamed-chunk-9-1.png" width="691.2" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">oldpar</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Buyse, M. (2010). Generalized pairwise comparisons of prioritized
outcomes in the two‐sample problem. <em>Statistics in Medicine</em>, 29,
3245–3257.</li>
<li>Mao, L. (2021). On restricted mean time in favour of treatment.
<em>Submitted</em>.</li>
<li>Moertel, C. G., Fleming, T. R., Macdonald, J. S., Haller, D. G.,
Laurie, J. A., Goodman, P. J., … &amp; Veeder, M. H. (1990). Levamisole
and fluorouracil for adjuvant therapy of resected colon carcinoma.
<em>New England Journal of Medicine</em>, 322, 352–358.</li>
<li>Royston, P. &amp; Parmar, M. K. (2011). The use of restricted mean
survival time to estimate the treatment effect in randomized clinical
trials when the proportional hazards assumption is in doubt.
<em>Statistics in Medicine</em>, 30, 2409–2421.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lu Mao.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
