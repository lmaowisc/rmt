<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Analysis of composite endpoints of recurrent event and death by the restricted mean time in favor of treatment • rmt</title>
<script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet">
<script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analysis of composite endpoints of recurrent event and death by the restricted mean time in favor of treatment">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rmt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/multistate.html">Analysis of multistate hierarchical outcomes by the restricted mean time in favor of treatment</a></li>
    <li><a class="dropdown-item" href="../articles/recurrent_event.html">Analysis of composite endpoints of recurrent event and death by the restricted mean time in favor of treatment</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Analysis of composite endpoints of recurrent event and death by the restricted mean time in favor of treatment</h1>
            
      

      <div class="d-none name"><code>recurrent_event.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">INTRODUCTION<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates the use of the R-package <code>rmt</code>
for the restricted-mean-time-in-favor-of-treatment approach to the
analysis of composite outcomes consisting of recurrent event and
death.</p>
<div class="section level3">
<h3 id="data-type">Data type<a class="anchor" aria-label="anchor" href="#data-type"></a>
</h3>
<p>Let <span class="math inline">N(t)</span> denote the counting process
for the recurrent event, e.g., repeated hospitalizations, and let <span class="math inline">N_D(t)</span> denote that for death. The composite
outcome process is defined by <span class="math display">Y(t)=N(t)+\infty N_D(t).</span> That is, <span class="math inline">Y(t)</span> counts the number of non-fatal event on
the living patient and jumps to <span class="math inline">\infty</span>
when the patient dies. Traditional ways of combining the components
include:</p>
<ol style="list-style-type: decimal">
<li>Time to the first event: <span class="math inline">Y^*(t)=I\{N(t)+N_D(t)&gt;0\}</span>;</li>
<li>Weighted composite event process (Mao and Lin, 2016): <span class="math inline">Y^{**}(t)=N(t)+w_DN_D(t)</span> for some <span class="math inline">w_D\geq 1</span>;</li>
</ol>
<p>Compared to these approaches, <span class="math inline">Y(t)</span>
has the advantage of including all events while prioritizing death in a
natural, hierarchical way.</p>
</div>
<div class="section level3">
<h3 id="effect-size-estimand">Effect size estimand<a class="anchor" aria-label="anchor" href="#effect-size-estimand"></a>
</h3>
<p>Let <span class="math inline">Y^{(a)}</span> denote the outcome
process from group <span class="math inline">a</span> (<span class="math inline">a=1</span> for the treatment and <span class="math inline">a=0</span> for the control). The estimand of
interest is constructed under a generalized pairwise comparison
framework (Buyse, 2010). With <span class="math inline">Y^{(1)}\perp
Y^{(0)}</span>, let <span class="math display">\mu(\tau)=E\int_0^\tau
I\{Y^{(1)}(t)&lt; Y^{(0)}(t)\}{\rm d}t -
E\int_0^\tau I\{Y^{(1)}(t)&gt; Y^{(0)}(t)\}{\rm d}t,</span> for some
pre-specified follow-up time <span class="math inline">\tau</span>. We
call <span class="math inline">\mu(\tau)</span> the <strong>restricted
mean time (RMT) in favor of treatment</strong> and interpret it as the
<em>average time gained by the treatment in a more favorable
condition</em>. It generalizes the familiar restricted mean survival
time to account for the non-fatal events. In fact, it can be shown that
<span class="math inline">\mu(\tau)</span> reduces to the net restricted
mean survival time (Royston &amp; Parmar, 2011) if <span class="math inline">N(t)\equiv 0</span>. For details of the methodology,
refer to Mao (2021).</p>
<p>The overall effect size admits a component-wise decomposition: <span class="math display">\mu(\tau)=\mu_D(\tau)+\mu_H(\tau),</span> where
<span class="math display">\begin{equation}\tag{*}
\mu_D(\tau)=E\int_0^\tau I\{Y^{(1)}(t)&lt;\infty,
Y^{(0)}(t)=\infty\}{\rm d} t-
E\int_0^\tau I\{Y^{(0)}(t)&lt;\infty, Y^{(0)}(t)=\infty\}{\rm d} t
\end{equation}</span> is equivalent to the standard net restricted mean
survival time and <span class="math display">\mu_H(\tau)=E\int_0^\tau
I\{Y^{(1)}(t)&lt; Y^{(0)}(t)&lt;\infty\}{\rm d}t -
E\int_0^\tau I\{Y^{(0)}(t)&lt; Y^{(1)}(t)&lt;\infty\}{\rm d}t</span> is
the average time gained by the treatment with fewer non-fatal events
among the living patients. The second component can be further
decomposed by <span class="math inline">\mu_H(\tau)=\sum_{k=1}^K\mu_k(\tau)</span>, where
<span class="math display">\begin{equation}\tag{**}
\mu_k(\tau)=E\int_0^\tau I\{Y^{(1)}(t)&lt;k, Y^{(0)}(t)=k\}{\rm d} t-
E\int_0^\tau I\{Y^{(0)}(t)&lt;k, Y^{(0)}(t)=k\}{\rm d} t,
\end{equation}</span> and <span class="math inline">K</span> is the
maximum number of non-fatal event. The quantity <span class="math inline">\mu_k(\tau)</span> can be interpreted as the average
time gained by the treatment before experiencing the <span class="math inline">k</span>th non-fatal event among the living
patients.</p>
</div>
</div>
<div class="section level2">
<h2 id="basic-syntax">BASIC SYNTAX<a class="anchor" aria-label="anchor" href="#basic-syntax"></a>
</h2>
<div class="section level3">
<h3 id="data-fitting-and-summarization">Data fitting and summarization<a class="anchor" aria-label="anchor" href="#data-fitting-and-summarization"></a>
</h3>
<p>The main data-fitting function is <code><a href="../reference/rmtfit.html">rmtfit()</a></code>. To use the
function, the input data must be organized in the “long” format.
Specifically, we need an <code>id</code> variable containing the unique
patient identifiers, a <code>time</code> variable containing the event
times, a <code>status</code> variable labeling the event type
(<code>status=1</code> for non-fatal event, <code>=2</code> for death,
and <code>=0</code> for censoring), and, finally, a <em>binary</em>
<code>trt</code> variable containing the subject-level treatment arm
indicators. If <code>id</code>, <code>time</code>, <code>status</code>,
and <code>trt</code> are all variables in a data frame
<code>data</code>, we can then use the formula form of the function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span><span class="op">=</span><span class="fu"><a href="../reference/rmtfit.html">rmtfit</a></span><span class="op">(</span><span class="fu"><a href="../reference/rec.html">rec</a></span><span class="op">(</span><span class="va">id</span>,<span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">trt</span>,<span class="va">data</span><span class="op">)</span></span></code></pre></div>
<p>Otherwise, we can feed the vector-valued variables directly into the
function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span><span class="op">=</span><span class="fu"><a href="../reference/rmtfit.html">rmtfit</a></span><span class="op">(</span><span class="va">id</span>,<span class="va">time</span>,<span class="va">status</span>,<span class="va">trt</span>,type<span class="op">=</span><span class="st">"recurrent"</span><span class="op">)</span></span></code></pre></div>
<p>Note that the last <code>type</code> option must be specified;
otherwise the input will be treated as multistate rather than recurrent
event data. The returned object <code>obj</code> contains basically all
the information about the overall and component-wise RMTs. To extract
relevant information for a particular <span class="math inline">\tau=</span><code>tau</code>, use</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">obj</span>,<span class="va">tau</span>,<span class="va">Kmax</span><span class="op">)</span></span></code></pre></div>
<p>If the last option <code>Kmax</code> is specified, say, as <span class="math inline">l</span>, then the estimates for the <span class="math inline">\mu_k(\tau)</span> over <span class="math inline">k=l,\ldots, K</span> will be aggregated, i.e., <span class="math inline">\sum_{k=l}^K\mu_k(\tau)</span>. Therefore, to make
inference on <span class="math inline">\mu_H(\tau)</span>, use</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">obj</span>,<span class="va">tau</span>,Kmax<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot-of-mucdot">Plot of <span class="math inline">\mu(\cdot)</span><a class="anchor" aria-label="anchor" href="#plot-of-mucdot"></a>
</h3>
<p>To plot the estimated <span class="math inline">\mu(\tau)</span> as a
function of <span class="math inline">\tau</span>, use</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">obj</span>,conf<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The option <code>conf=T</code> requests the 95% confidence limits to
be overlaid. The color and line type of the confidence limits can be
controlled by arguments <code>conf.col</code> and <code>conf.lty</code>,
respectively. Other graphical parameters can be specified and, if so,
will be passed to the underlying generic <code>plot</code> method.</p>
</div>
<div class="section level3">
<h3 id="bouquet-plot">Bouquet plot<a class="anchor" aria-label="anchor" href="#bouquet-plot"></a>
</h3>
<p>The dynamic profile of treatment effects as follow-up progresses is
captured by the bouquet plot, which puts <span class="math inline">\tau</span> on the vertical axis and plots the
component-wise restricted mean win/loss times, i.e., the first and
second terms on the right hand side of <span class="math inline">(*)</span> and <span class="math inline">(**)</span>, as functions of <span class="math inline">\tau</span> on the two sides. The bouquet plot is
useful because it visualizes the component-wise contributions to the
overall effect. To plot it, use</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bouquet.html">bouquet</a></span><span class="op">(</span><span class="va">obj</span>,<span class="va">Kmax</span><span class="op">)</span></span></code></pre></div>
<p>The option <code>Kmax</code> performs a similar task to that in the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function. For better visualization, we should
almost always specify a <code>Kmax</code><span class="math inline">&lt;K</span>, especially when <span class="math inline">K</span> is large. Other graphical parameters can be
specified and, if so, will be passed to the underlying generic
<code>plot</code> method.</p>
</div>
</div>
<div class="section level2">
<h2 id="an-example-with-the-hf-action-trial">AN EXAMPLE WITH THE HF-ACTION TRIAL<a class="anchor" aria-label="anchor" href="#an-example-with-the-hf-action-trial"></a>
</h2>
<div class="section level3">
<h3 id="data-description">Data description<a class="anchor" aria-label="anchor" href="#data-description"></a>
</h3>
<p>A total of over two thousand heart failure patients across the USA,
Canada, and France participated in the Heart Failure: A Controlled Trial
Investigating Outcomes of Exercise Training between 2003–2007 (O’Connor
et al., 2009). The primary objective of the trial was to evaluate the
effect of adding exercise training to the usual patient care on the
composite endpoint of all-cause hospitalization and death. We consider a
subgroup of 426 non-ischemic patients with baseline cardio-pulmonary
exercise test less than or equal to nine minutes. In this subgroup, 205
patients were randomly assigned to receive exercise training in addition
to usual care and 221 to receive usual care alone. With a median
follow-up time about 28 months, the death rates in the exercise training
and usual care groups are about 18% and 26%, and the average numbers of
recurrent hospitalizations per patient about 2.2 and 2.6, respectively.
The maximum number of hospitalizations per patient is <span class="math inline">K=26</span>.</p>
<p>The dataset <code>hfaction</code> is contained in the
<code>rmt</code> package and can be loaded by</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sites.google.com/view/lmaowisc/" class="external-link">rmt</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hfaction</span><span class="op">)</span></span>
<span><span class="co">#&gt;        patid       time status trt_ab age60</span></span>
<span><span class="co">#&gt; 1 HFACT00001 0.60506502      1      0     1</span></span>
<span><span class="co">#&gt; 2 HFACT00001 1.04859685      0      0     1</span></span>
<span><span class="co">#&gt; 3 HFACT00002 0.06297057      1      0     1</span></span>
<span><span class="co">#&gt; 4 HFACT00002 0.35865845      1      0     1</span></span>
<span><span class="co">#&gt; 5 HFACT00002 0.39698836      1      0     1</span></span>
<span><span class="co">#&gt; 6 HFACT00002 3.83299110      0      0     1</span></span></code></pre></div>
<p>The dataset is already in a format suitable for <code><a href="../reference/rmtfit.html">rmtfit()</a></code>
(<code>status</code>= 1 for hospitalization and = 2 for death).</p>
</div>
<div class="section level3">
<h3 id="estimation-and-inference">Estimation and inference<a class="anchor" aria-label="anchor" href="#estimation-and-inference"></a>
</h3>
<p>We first fit the data by</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span><span class="op">=</span><span class="fu"><a href="../reference/rmtfit.html">rmtfit</a></span><span class="op">(</span><span class="fu"><a href="../reference/rec.html">rec</a></span><span class="op">(</span><span class="va">patid</span>,<span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">trt_ab</span>,data<span class="op">=</span><span class="va">hfaction</span><span class="op">)</span></span>
<span><span class="co">## print the event numbers by group</span></span>
<span><span class="va">obj</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; rmtfit.formula(formula = rec(patid, time, status) ~ trt_ab, data = hfaction)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     N Event 1 Event 2 Event 3 Event 4 Event 5 Event 6 Event 7 Event 8 Event 9</span></span>
<span><span class="co">#&gt; 0 221     170     117      86      56      33      23      15      13      13</span></span>
<span><span class="co">#&gt; 1 205     145      89      55      43      32      21      15      11       7</span></span>
<span><span class="co">#&gt;   Event 10 Event 11 Event 12 Event 13 Event 14 Event 15 Event 16 Event 17</span></span>
<span><span class="co">#&gt; 0       11        7        6        6        5        3        2        2</span></span>
<span><span class="co">#&gt; 1        5        4        3        2        2        2        2        2</span></span>
<span><span class="co">#&gt;   Event 18 Event 19 Event 20 Event 21 Event 22 Event 23 Event 24 Event 25</span></span>
<span><span class="co">#&gt; 0        2        1        0        0        0        0        0        0</span></span>
<span><span class="co">#&gt; 1        2        2        1        1        1        1        1        1</span></span>
<span><span class="co">#&gt;   Event 26 Death Med follow-up time</span></span>
<span><span class="co">#&gt; 0        0    57           2.390144</span></span>
<span><span class="co">#&gt; 1        1    36           2.302533</span></span>
<span></span>
<span><span class="co"># summarize the inference results for tau=3.5 years</span></span>
<span><span class="co"># </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">obj</span>,tau<span class="op">=</span><span class="fl">3.5</span>,Kmax<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; rmtfit.formula(formula = rec(patid, time, status) ~ trt_ab, data = hfaction)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Restricted mean winning time by tau = 3.5:</span></span>
<span><span class="co">#&gt;     Event 1   Event 2    Event 3    Event 4    Event 5    Event 6    Event 7</span></span>
<span><span class="co">#&gt; 0 0.2461459 0.1797341 0.07400189 0.05705096 0.06778913 0.03229824 0.02901336</span></span>
<span><span class="co">#&gt; 1 0.2606647 0.2246581 0.18911776 0.07928876 0.05043218 0.04036515 0.01434557</span></span>
<span><span class="co">#&gt;      Event 8    Event 9    Event 10    Event 11    Event 12     Event 13</span></span>
<span><span class="co">#&gt; 0 0.02467620 0.01351584 0.007900133 0.001056981 0.007932054 0.0006445581</span></span>
<span><span class="co">#&gt; 1 0.01169075 0.01232759 0.009301100 0.004563094 0.001627585 0.0024747931</span></span>
<span><span class="co">#&gt;       Event 14     Event 15     Event 16     Event 17     Event 18     Event 19</span></span>
<span><span class="co">#&gt; 0 0.0007787642 0.0003834044 0.0003137311 0.0001010352 0.0001123888 0.0004848228</span></span>
<span><span class="co">#&gt; 1 0.0077805017 0.0019915287 0.0007116988 0.0003040931 0.0003580146 0.0001079202</span></span>
<span><span class="co">#&gt;       Event 20     Event 21     Event 22     Event 23    Event 24     Event 25</span></span>
<span><span class="co">#&gt; 0 0.0001781611 0.0007311137 0.0003162343 0.0005731831 0.001192464 0.0002290646</span></span>
<span><span class="co">#&gt; 1 0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.000000000 0.0000000000</span></span>
<span><span class="co">#&gt;      Event 26  Survival  Overall</span></span>
<span><span class="co">#&gt; 0 0.004352256 0.2967478 1.048254</span></span>
<span><span class="co">#&gt; 1 0.000000000 0.4958881 1.407999</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Restricted mean time in favor of group "1" by time tau = 3.5:</span></span>
<span><span class="co">#&gt;           Estimate   Std.Err Z value Pr(&gt;|z|)   </span></span>
<span><span class="co">#&gt; Event 1   0.014519  0.047535  0.3054 0.760034   </span></span>
<span><span class="co">#&gt; Event 2   0.044924  0.045661  0.9839 0.325185   </span></span>
<span><span class="co">#&gt; Event 3   0.115116  0.035992  3.1984 0.001382 **</span></span>
<span><span class="co">#&gt; Event 4+ -0.013954  0.049358 -0.2827 0.777403   </span></span>
<span><span class="co">#&gt; Survival  0.199140  0.093300  2.1344 0.032810 * </span></span>
<span><span class="co">#&gt; Overall   0.359745  0.154062  2.3351 0.019540 * </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre></div>
<p>From the above output, we conclude that, at 3.5 years, the combined
treatment on average gains the patient <span class="math inline">\mu(\tau)=0.36</span> extra year in a more favorable
state compared to the control. This total effect size comprises an
additional <span class="math inline">\mu_D(\tau)=0.20</span> year of
survival time and <span class="math inline">\mu_H(\tau)=0.36-0.20=0.16</span> year with fewer
hospitalizations among the living. The latter component is mainly driven
by a prolonging of time to the third hospitalization. The matrix
containing the inferential results can be obtained from
<code>summary(obj,tau=3.5,Kmax=4)$tab</code>.</p>
<p>To obtain the inferential result for <span class="math inline">\mu_H(\tau)</span> as a whole, run</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># summarize the inference results for hospitalization as a whole</span></span>
<span><span class="va">obj_sum</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">obj</span>,tau<span class="op">=</span><span class="fl">3.5</span>,Kmax<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">obj_sum</span><span class="op">$</span><span class="va">tab</span></span>
<span><span class="co">#&gt;           Estimate    Std.Err  Z value   Pr(&gt;|z|)</span></span>
<span><span class="co">#&gt; Event 1+ 0.1606050 0.08986723 1.787136 0.07391549</span></span>
<span><span class="co">#&gt; Survival 0.1991404 0.09330039 2.134400 0.03281004</span></span>
<span><span class="co">#&gt; Overall  0.3597453 0.15406184 2.335071 0.01953971</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="graphical-analysis">Graphical analysis<a class="anchor" aria-label="anchor" href="#graphical-analysis"></a>
</h3>
<p>Use the following code to construct the bouquet plot and the plot for
the estimated <span class="math inline">\mu(\cdot)</span>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set-up plot parameters</span></span>
<span><span class="va">oldpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">"mfrow"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Bouquet plot</span></span>
<span><span class="fu"><a href="../reference/bouquet.html">bouquet</a></span><span class="op">(</span><span class="va">obj</span>,Kmax<span class="op">=</span><span class="fl">4</span>,main<span class="op">=</span><span class="st">"Bouquet plot"</span>,cex.group<span class="op">=</span><span class="fl">0.8</span>, xlab<span class="op">=</span><span class="st">"Restricted mean win/loss time (years)"</span>, </span>
<span>        ylab<span class="op">=</span><span class="st">"Follow-up time (years)"</span>, cex.main<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span> <span class="co">#cex.group: font size of group labels#</span></span>
<span><span class="co"># Plot of RMT in favor of treatment over time</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">obj</span>,conf<span class="op">=</span><span class="cn">TRUE</span>,col<span class="op">=</span><span class="st">'red'</span>,conf.col<span class="op">=</span><span class="st">'blue'</span>,conf.lty<span class="op">=</span><span class="fl">2</span>, xlab<span class="op">=</span><span class="st">"Follow-up time (years)"</span>,</span>
<span>        ylab<span class="op">=</span><span class="st">"RMT in favor of treatment (years)"</span>,main<span class="op">=</span><span class="st">"Exercise training vs usual care"</span>,</span>
<span>     cex.main<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
<p><img src="recurrent_event_files/figure-html/unnamed-chunk-10-1.png" width="691.2" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">oldpar</span><span class="op">)</span></span></code></pre></div>
<p>In the bouquet plot, the four bands with different shades of gray,
from the darkest to the lightest, correspond to survival, 4+
hospitalizations, 3 hospitalization, 2 hospitalizations, and 1
hospitalization, respectively. We can see that the restricted mean
survival time is clearly in favor of exercise training. The restricted
mean win times on the second and third hospitalizations are also visibly
greater in the treatment group. The 95% confidence limits for <span class="math inline">\mu(\tau)</span> in the right panel suggests that
the overall treatment effect becomes significant at the 0.05 level after
approximately 1 year of follow-up and stays so till the end of the
study.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Buyse, M. (2010). Generalized pairwise comparisons of prioritized
outcomes in the two‐sample problem. <em>Statistics in Medicine</em>, 29,
3245–3257.</li>
<li>Mao, L. (2021). On restricted mean time in favour of treatment.
<em>Submitted</em>.</li>
<li>Mao, L. &amp; Lin, D. Y. (2016). Semiparametric regression for the
weighted composite endpoint of recurrent and terminal events.
Biostatistics, 172, 390–403.</li>
<li>O’Connor, C. M., Whellan, D. J., Lee, K. L., Keteyian, S. J.,
Cooper, L. S., Ellis, S. J., … &amp; Rendall, D. S. (2009). Efficacy and
safety of exercise training in patients with chronic heart failure:
HF-ACTION randomized controlled trial. JAMA, 301, 1439–1450.</li>
<li>Royston, P. &amp; Parmar, M. K. (2011). The use of restricted mean
survival time to estimate the treatment effect in randomized clinical
trials when the proportional hazards assumption is in doubt.
<em>Statistics in Medicine</em>, 30, 2409–2421.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lu Mao.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
